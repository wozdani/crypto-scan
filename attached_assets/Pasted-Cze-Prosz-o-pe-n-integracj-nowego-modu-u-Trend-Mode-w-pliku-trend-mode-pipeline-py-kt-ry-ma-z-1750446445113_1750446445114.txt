CzeÅ›Ä‡! ProszÄ™ o peÅ‚nÄ… integracjÄ™ nowego moduÅ‚u Trend Mode w pliku trend_mode_pipeline.py, ktÃ³ry ma zastÄ…piÄ‡ dotychczasowy mechanizm wykrywania trendu i wejÅ›cia.

âœ… ZaÅ‚oÅ¼enia systemu:
Trend analizowany na Å›wiecach 15M z ostatnich 24h (96 Å›wiec)

WejÅ›cie wykrywane na Å›wiecach 5M z ostatnich 60 minut (12 Å›wiec)

Alert wysyÅ‚any tylko jeÅ›li oba warunki sÄ… speÅ‚nione

ğŸ“¦ ModuÅ‚y do zaimplementowania:
1. is_strong_uptrend_15m(prices_15m: list[float]) -> bool
Wykrywa realny trend wzrostowy:

python
Kopiuj
Edytuj
def is_strong_uptrend_15m(prices_15m: list[float]) -> bool:
    if len(prices_15m) < 20:
        return False
    upmoves = [1 if prices_15m[i] > prices_15m[i-1] else -1 for i in range(1, len(prices_15m))]
    up_ratio = sum(1 for m in upmoves if m == 1) / len(upmoves)
    return up_ratio >= 0.6 and prices_15m[-1] > prices_15m[-6]
Warunek: â‰¥60% zielonych Å›wiec i ostatnia cena > cena sprzed 6 Å›wiec.

2. is_entry_after_correction(prices_5m: list[float], asks: list[float], bids: list[float]) -> bool
Wykrywa idealne wejÅ›cie na koÅ„cu korekty:

python
Kopiuj
Edytuj
def is_entry_after_correction(prices_5m: list[float], asks: list[float], bids: list[float]) -> bool:
    if len(prices_5m) < 5 or len(asks) < 3 or len(bids) < 3:
        return False
    recent_reds = sum(1 for i in range(-4, -1) if prices_5m[i] < prices_5m[i-1])
    ask_down = asks[-3] > asks[-2] > asks[-1]
    bid_up = bids[-3] < bids[-2] < bids[-1]
    return recent_reds >= 2 and ask_down and bid_up
Warunek: min. 2 czerwone Å›wiece + spadek presji sprzedaÅ¼y + wzrost presji kupna.

ğŸ” PoÅ‚Ä…czenie w gÅ‚Ã³wnej logice:
python
Kopiuj
Edytuj
if is_strong_uptrend_15m(prices_15m) and is_entry_after_correction(prices_5m, ask_vols, bid_vols):
    return {
        "trend_mode": True,
        "trend_score": 100,
        "entry_triggered": True
    }
else:
    return {
        "trend_mode": False,
        "trend_score": 0,
        "entry_triggered": False
    }
ğŸ” Dane wejÅ›ciowe:
prices_15m â€“ lista zamkniÄ™Ä‡ z 96 Å›wiec 15M

prices_5m â€“ lista zamkniÄ™Ä‡ z 12 Å›wiec 5M

ask_vols, bid_vols â€“ 3 ostatnie wartoÅ›ci z orderbooku (do oceny presji)

ğŸ” ProszÄ™ o peÅ‚ne zastÄ…pienie starego systemu detekcji trendu tÄ… wersjÄ… oraz integracjÄ™ z scan_cycle() jako osobny alert typu "trend_mode".

JeÅ›li potrzebne â€“ mogÄ™ teÅ¼ doÅ‚oÅ¼yÄ‡ kod pobierania 96 Å›wiec 15M i 12 Å›wiec 5M oraz obliczania ask/bid volume z orderbooku.