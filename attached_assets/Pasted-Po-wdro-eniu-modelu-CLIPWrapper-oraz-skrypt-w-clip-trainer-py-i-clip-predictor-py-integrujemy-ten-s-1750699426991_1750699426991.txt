Po wdroÅ¼eniu modelu CLIPWrapper oraz skryptÃ³w clip_trainer.py i clip_predictor.py, integrujemy ten system z TJDE (simulate_trader_decision_advanced()), aby:

âœ… Automatycznie wykrywaÄ‡ fazÄ™ rynku i typ setupu z wykresu (obraz)
âœ… UÅ¼ywaÄ‡ tej predykcji jako dodatkowej cechy scoringowej w podejmowaniu decyzji
âœ… ZwiÄ™kszaÄ‡ inteligencjÄ™ systemu â€“ â€widzenie jak traderâ€

ğŸ” ZMIANY DO WDROÅ»ENIA
1. Importuj CLIP predictor
W pliku z simulate_trader_decision_advanced() (np. trader_ai_engine.py):

python
Kopiuj
Edytuj
from ai.clip_predictor import predict_clip_chart
2. Zdefiniuj listÄ™ moÅ¼liwych faz / setupÃ³w
(np. u gÃ³ry pliku lub w configu):

python
Kopiuj
Edytuj
CANDIDATE_PHASES = [
    "breakout-continuation", "pullback-in-trend", "range-accumulation",
    "trend-reversal", "consolidation", "fake-breakout", "trending-up", "trending-down"
]
3. W simulate_trader_decision_advanced(symbol, ...) dodaj sekcjÄ™ predykcji CLIP:
python
Kopiuj
Edytuj
# ğŸ” CLIP Vision Prediction
image_path = f"training_data/clip/{symbol}_{timestamp_str}.png"  # lub inna Å›cieÅ¼ka do obrazu wykresu
try:
    clip_result = predict_clip_chart(image_path, CANDIDATE_PHASES)
    predicted_phase = clip_result["predicted_label"]
    clip_confidence = clip_result["confidence"]
except Exception as e:
    predicted_phase = "unknown"
    clip_confidence = 0.0
    print(f"[CLIP] âŒ Failed for {symbol}: {e}")
4. W scoringu dodaj modyfikator np. jako clip_phase_modifier:
python
Kopiuj
Edytuj
# PrzykÅ‚ad modyfikatora scoringu na podstawie CLIP predykcji
clip_phase_modifier = 0.0
if "breakout" in predicted_phase:
    clip_phase_modifier = 0.08 * clip_confidence
elif "pullback-in-trend" in predicted_phase:
    clip_phase_modifier = 0.05 * clip_confidence
elif "trend-reversal" in predicted_phase:
    clip_phase_modifier = -0.06 * clip_confidence

# Dodaj do final_score
final_score += clip_phase_modifier
5. Dodaj wynik CLIP do debug_info i alertu Telegram:
python
Kopiuj
Edytuj
debug_info["clip_phase_prediction"] = predicted_phase
debug_info["clip_confidence"] = clip_confidence
debug_info["clip_modifier"] = round(clip_phase_modifier, 3)
I w alercie Telegram:

yaml
Kopiuj
Edytuj
ğŸ§  CLIP Phase Prediction: pullback-in-trend (conf: 0.72)
ğŸ”§ Modifier Applied: +0.036
ğŸ§  Finalny Efekt:
Model CLIP dziaÅ‚a jako kolejna warstwa â€intuicji traderaâ€, patrzÄ…c na wykres i mÃ³wiÄ…c:

â€To wyglÄ…da jak wyczerpanie trenduâ€

â€Tu jest pullback po breakoutcieâ€

â€To klasyczna konsolidacja z niskim wolumenemâ€

Wszystko zintegrowane z TJDE i wpÅ‚ywajÄ…ce na decyzjÄ™ alert/avoid!

