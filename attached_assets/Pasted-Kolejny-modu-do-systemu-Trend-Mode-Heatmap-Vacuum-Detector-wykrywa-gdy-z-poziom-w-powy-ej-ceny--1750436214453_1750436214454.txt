Kolejny moduÅ‚ do systemu Trend Mode:
Heatmap Vacuum Detector â€“ wykrywa, gdy z poziomÃ³w powyÅ¼ej ceny znikajÄ… zlecenia ask, co tworzy prÃ³Å¼niÄ™ likwidacyjnÄ… â†’ tzw. vacuum zone.

ğŸ§  Cel:
JeÅ›li zlecenia sprzedaÅ¼y (ask) znikajÄ… z heatmapy, mimo Å¼e cena siÄ™ zbliÅ¼a, to znaczy:
Whale lub smart money "czyÅ›ci drogÄ™" pod przyszÅ‚y ruch w gÃ³rÄ™.
Rynek staje siÄ™ â€lekiâ€, Å‚atwo go popchnÄ…Ä‡.

ğŸ“Š Dane potrzebne:
2â€“3 snapshoty orderbooka z heatmap (np. poziomy +1% do +2% powyÅ¼ej ceny)

ZmniejszajÄ…ca siÄ™ iloÅ›Ä‡ zleceÅ„ ask na tych poziomach

âœ… Funkcja: detect_heatmap_vacuum(orderbook_snapshots: list[dict])
python
Kopiuj
Edytuj
def detect_heatmap_vacuum(orderbook_snapshots: list[dict]) -> bool:
    """
    Wykrywa zanik zleceÅ„ ask 1â€“2% powyÅ¼ej ceny (tworzenie vacuum).
    """
    if len(orderbook_snapshots) < 3:
        return False

    disappearance_ratio_threshold = 0.4
    price = orderbook_snapshots[-1]["price"]

    vacuum_counts = 0
    total_levels = 0

    for level in orderbook_snapshots[0]["asks"]:
        ask_price = level[0]
        if 1.01 * price <= ask_price <= 1.02 * price:
            total_levels += 1
            initial_volume = level[1]

            # znajdÅº koÅ„cowÄ… objÄ™toÅ›Ä‡ tego poziomu w ostatnim snapshot
            final_volume = next(
                (v[1] for v in orderbook_snapshots[-1]["asks"] if abs(v[0] - ask_price) < 0.0001),
                0
            )

            if final_volume < initial_volume * (1 - disappearance_ratio_threshold):
                vacuum_counts += 1

    if total_levels >= 3 and vacuum_counts >= 2:
        return True

    return False
ğŸ”§ Integracja z trend_mode_pipeline.py:
python
Kopiuj
Edytuj
from detectors.heatmap_vacuum import detect_heatmap_vacuum

if orderbook_snapshots and detect_heatmap_vacuum(orderbook_snapshots):
    score += 10
    reasons.append("heatmap vacuum above price â€“ probable lift-off zone")
ğŸ“ Plik:
detectors/heatmap_vacuum.py

ğŸ” WartoÅ›ci domyÅ›lne:
PrÃ³g: zanik â‰¥ 40% wolumenu ask na poziomach +1â€“2%

Przynajmniej 2 poziomy muszÄ… siÄ™ â€wyczyÅ›ciÄ‡â€ z min. 3

ğŸ’¡ Efekt:
JeÅ›li cena siÄ™ zbliÅ¼a, a zlecenia ask znikajÄ… â€“ ktoÅ› przygotowuje rampÄ™

Detektor ten dodaje +10 do scoringu Trend Mode

DziaÅ‚a tylko na porzÄ…dnych danych z orderbooka

ProszÄ™ o wdroÅ¼enie tego detektora i podÅ‚Ä…czenie do pipelineâ€™u Trend Mode.