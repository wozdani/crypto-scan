ProszÄ™ o wdroÅ¼enie poniÅ¼szych zmian do systemu alertÃ³w Telegram w module trend-mode:

âœ… Cel:
Ulepszenie systemu alertÃ³w Telegram po kaÅ¼dym skanie, tak aby:

WysyÅ‚aÅ‚ TOP 5 tokenÃ³w wg najwyÅ¼szego final_score.

PokazywaÅ‚ decyzjÄ™ LONG / SHORT / AVOID.

DoÅ‚Ä…czaÅ‚ peÅ‚ny scoring breakdown i analizÄ™ decyzji.

InformowaÅ‚, jak feedback_loop_v2 zmodyfikowaÅ‚ wagi scoringowe.

DodawaÅ‚ komentarz wyjaÅ›niajÄ…cy DLACZEGO uznano setup za wartoÅ›ciowy (np. â€liquidity pressureâ€, â€breakout volumeâ€, â€HTF alignmentâ€).

ğŸ“¦ Plik: utils/alerts.py
Dodaj lub zaktualizuj funkcjÄ™ wysyÅ‚ajÄ…cÄ… alert:

python
Kopiuj
Edytuj
from utils.telegram_bot import send_telegram_message

def send_tjde_telegram_summary(top5_results: list):
    for result in top5_results:
        symbol = result['symbol']
        score = result['final_score']
        decision = result['decision']
        confidence = result.get('confidence', 'N/A')
        grade = result.get('grade', 'N/A')
        market_phase = result.get('market_phase', 'N/A')
        reasons = "\nâ†’ " + "\nâ†’ ".join(result.get("decision_reasons", []))

        breakdown = result.get("score_breakdown", {})
        weights = result.get("weights_used", {})
        feedback_notes = result.get("feedback_loop_notes", "Brak zmian w wagach")

        breakdown_str = "\n".join([f"â€¢ {k.replace('_', ' ').title()}: {round(v, 3)}" for k, v in breakdown.items()])
        weights_str = "\n".join([f"{k}: {round(v, 4)}" for k, v in weights.items()]) if weights else "N/A"

        message = (
            f"#{top5_results.index(result)+1} âš¡ï¸ TJDE Alert: {symbol}\n\n"
            f"ğŸ“Š Score: {round(score, 3)} | Confidence: {confidence}\n"
            f"â“ Grade: {grade} | Decision: {decision.upper()}\n"
            f"ğŸ“ˆ Phase: {market_phase}\n\n"
            f"ğŸ§  Score Breakdown:\n{breakdown_str}\n\n"
            f"ğŸ§  Adaptive Weights Used:\n{weights_str}\n\n"
            f"ğŸ”§ Feedback Loop Notes:\n{feedback_notes}\n\n"
            f"ğŸ’¡ Analysis:{reasons}"
        )

        send_telegram_message(message)
ğŸ“‚ Gdzie wywoÅ‚aÄ‡?
W pliku crypto_scan_service.py (lub gdzie koÅ„czy siÄ™ skan trend-mode) â€“ po wygenerowaniu listy TOP 5 wynikÃ³w z simulate_trader_decision_advanced():

python
Kopiuj
Edytuj
from utils.alerts import send_tjde_telegram_summary

# Po sortowaniu wynikÃ³w i filtracji do top5
top5 = sorted(results, key=lambda x: x['final_score'], reverse=True)[:5]
send_tjde_telegram_summary(top5)
DziÄ™ki! Dajcie znaÄ‡ jak coÅ› nie dziaÅ‚a â€“ ten system ma byÄ‡ inteligentnym traderem, nie botem od Å›wieczek ğŸ’¡

Pozdrawiam,